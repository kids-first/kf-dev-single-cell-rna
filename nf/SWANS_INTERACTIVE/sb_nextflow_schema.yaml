app_content:
    entrypoint: main.nf
class: nextflow
executor_version: 23.04.1
id: kf-swans-interactive-report
description: SWANS Interactive Report
cwlVersion: None
requirements:
-   class: InlineJavascriptRequirement
-   class: ShellCommandRequirement
-   class: LoadListingRequirement
    loadListing: deep_listing

hints:
-   class: sbg:NextflowExecutionMode
    value: multi-instance
-   class: "sbg:maxNumberOfParallelInstances"
    value: 10

arguments:
-   position: 0
    shellQuote: false
    valueFrom: >
        --outdir results --sbg_run True --max_cpus 48 --max_memory 128.GB --max_time 12.h --r_lib_path /usr/local/lib/R/site-library/

inputs:
-   id: project
    inputBinding:
        prefix: --project
    type:
    - string
-   id: initial_seurat_object
    inputBinding:
        prefix: --initial_seurat_object
    description: qs file output from SWANS Data Cleanup and QC
    type:
    - File
-   id: organism
    inputBinding:
        prefix: --organism
    default: human
    type:
    - 'null'
    -   name: organism
        symbols:
        - human
        - mouse
        type: enum
-   id: mito_cutoff
    inputBinding:
        prefix: --mito_cutoff
    description: mitochondrial cutoff percent as int. Set to 100 to filter nothing
    default: 15
    type:
    - 'null'
    - int
-   id: ribo_cutoff
    inputBinding:
        prefix: --ribo_cutoff
    description: ribosomal cutoff percent as int. Set to 100 to filter nothing
    default: 100
    type:
    - 'null'
    - int
-   id: int_components
    inputBinding:
        prefix: --int_components
    description: number of pcs to use in seurat
    default: 30
    type:
    - 'null'
    - int
-   id: aso_processes
    inputBinding:
        prefix: --aso_processes
    description: Number of processes to use for parallel processing in analyze_seurat_object
        module
    default: 4
    type:
    - 'null'
    - int
-   id: aso_memory
    inputBinding:
        prefix: --aso_memory
    default: 30000000000
    type:
    - 'null'
    - int
-   id: run_azimuth
    inputBinding:
        prefix: --run_azimuth
    default: n
    type:
    - 'null'
    -   name: run_azimuth
        symbols:
        - n
        - y
        type: enum
-   id: azimuth_ref
    inputBinding:
        prefix: --azimuth_ref
    description: azimuth reference dataset to use for annotation
    type:
    - 'null'
    - string
-   id: run_transferdata
    inputBinding:
        prefix: --run_transferdata
    default: n
    type:
    - 'null'
    -   name: run_transferdata
        symbols:
        - n
        - y
        type: enum
-   id: transferdata_ref_file
    inputBinding:
        prefix: --transferdata_ref_file
    description: path to reference Seurat object for TransferData
    type:
    - 'null'
    - File
-   id: transferdata_reduction
    inputBinding:
        prefix: --transferdata_reduction
    description: which dimensional reduction in the transferdata_ref_file to use for transferdata
    type:
    - 'null'
    - string
-   id: transferdata_annocol
    inputBinding:
        prefix: --transferdata_annocol
    description: which seurat meta.data column to use for transferdata annotation
    type:
    - 'null'
    - string
-   id: mito_regression
    inputBinding:
        prefix: --mito_regression
    description: should mito percent be regressed
    default: n
    type:
    - 'null'
    -   name: mito_regression
        symbols:
        - n
        - y
        type: enum
-   id: ribo_regression
    inputBinding:
        prefix: --ribo_regression
    description: should ribo percent be regressed
    default: n
    type:
    - 'null'
    -   name: ribo_regression
        symbols:
        - n
        - y
        type: enum
-   id: cc_method
    inputBinding:
        prefix: --cc_method
    description: 'Method for cell cycle scoring: standard or alternative'
    type:
    - 'null'
    -   name: cc_method
        symbols:
        - standard
        - alternative
        type: enum
-   id: num_var_features
    inputBinding:
        prefix: --num_var_features
    description: Number of variable features (genes) to use in normalization
    default: 3000
    type:
    - 'null'
    - int
-   id: resolution_config
    inputBinding:
        prefix: --resolution_config
    description: resolution value(s) as csv string, i.e. 0.5 or 0.1,0.2,0.3
    default: 0.1,0.2,0.3
    type:
    - 'null'
    - string
-   id: include_tsne
    inputBinding:
        prefix: --include_tsne
    description: make tsne plots
    default: n
    type:
    - 'null'
    -   name: include_tsne
        symbols:
        - n
        - y
        type: enum
-   id: scale_data_features
    inputBinding:
        prefix: --scale_data_features
    description: which features to use for scale data
    default: variable
    type:
    - 'null'
    -   name: scale_data_features
        symbols:
        - variable
        - all
        type: enum
-   id: split_layers_by
    inputBinding:
        prefix: --split_layers_by
    description: metadata by which to split the object into layers (experiment, sample (recommended))
    default: Sample
    type:
    - 'null'
    - string
-   id: normalization_config
    inputBinding:
        prefix: --normalization_config
    description: normalization method for Seurat (standard, sct) as csv string -- choose
        one or all
    default: standard,sct
    type:
    - 'null'
    - string
-   id: integration_config
    inputBinding:
        prefix: --integration_config
    description: integration method for seurat (cca, rpca, harmony) as csv -- choose any
        combination or all options
    default: cca,rpca,harmony
    type:
    - 'null'
    - string
-   id: ref_based_integration
    inputBinding:
        prefix: --ref_based_integration
    default: n
    type:
    - 'null'
    -   name: ref_based_integration
        symbols:
        - n
        - y
        type: enum
-   id: ref_samples
    inputBinding:
        prefix: --ref_samples
    description: which sample(s) to use as references for ref-based integration? (names
        from samples.sample_list)
    type:
    - 'null'
    - string
-   id: regression_file
    inputBinding:
        prefix: --regression_file
    description: file of additional genes to be regressed
    type:
    - 'null'
    - File
-   id: storage
    inputBinding:
        prefix: --storage
    default: rds
    type:
    - 'null'
    -   name: storage
        symbols:
        - rds
        - sceo
        type: enum
-   id: conserved_genes
    inputBinding:
        prefix: --conserved_genes
    description: run conserved genes (y/n) -- only run with multiple experiments
    default: n
    type:
    - 'null'
    -   name: conserved_genes
        symbols:
        - n
        - y
        type: enum
-   id: visualization
    inputBinding:
        prefix: --visualization
    default: dot
    type:
    - 'null'
    - string
-   id: user_gene_file
    inputBinding:
        prefix: --user_gene_file
    description: relative path with filename to file containing genes of interest
    type:
    - 'null'
    - File

outputs:
-   id: analysis_result
    doc: tar ball with interactive report results. See https://github.com/FrancoResearchLab/SWANS/blob/v2.1.0/README.md#html--shiny-report on how to view
    type: File
    outputBinding:
        glob: 'results/*'
